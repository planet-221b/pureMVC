/*! 199116d */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("index",[],e):"object"==typeof exports?exports.index=e():t.index=e()}(window,function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";var o=Object.prototype.hasOwnProperty,r="~";function i(){}function a(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(t,e,n,o,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new a(n,o||t,i),c=r?r+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],s]:t._events[c].push(s):(t._events[c]=s,t._eventsCount++),t}function c(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function u(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),u.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)o.call(t,e)&&n.push(r?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},u.prototype.listeners=function(t){var e=r?r+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,i=n.length,a=new Array(i);o<i;o++)a[o]=n[o].fn;return a},u.prototype.listenerCount=function(t){var e=r?r+t:t,n=this._events[e];return n?n.fn?1:n.length:0},u.prototype.emit=function(t,e,n,o,i,a){var s=r?r+t:t;if(!this._events[s])return!1;var c,u,p=this._events[s],f=arguments.length;if(p.fn){switch(p.once&&this.removeListener(t,p.fn,void 0,!0),f){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,e),!0;case 3:return p.fn.call(p.context,e,n),!0;case 4:return p.fn.call(p.context,e,n,o),!0;case 5:return p.fn.call(p.context,e,n,o,i),!0;case 6:return p.fn.call(p.context,e,n,o,i,a),!0}for(u=1,c=new Array(f-1);u<f;u++)c[u-1]=arguments[u];p.fn.apply(p.context,c)}else{var l,h=p.length;for(u=0;u<h;u++)switch(p[u].once&&this.removeListener(t,p[u].fn,void 0,!0),f){case 1:p[u].fn.call(p[u].context);break;case 2:p[u].fn.call(p[u].context,e);break;case 3:p[u].fn.call(p[u].context,e,n);break;case 4:p[u].fn.call(p[u].context,e,n,o);break;default:if(!c)for(l=1,c=new Array(f-1);l<f;l++)c[l-1]=arguments[l];p[u].fn.apply(p[u].context,c)}}return!0},u.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},u.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},u.prototype.removeListener=function(t,e,n,o){var i=r?r+t:t;if(!this._events[i])return this;if(!e)return c(this,i),this;var a=this._events[i];if(a.fn)a.fn!==e||o&&!a.once||n&&a.context!==n||c(this,i);else{for(var s=0,u=[],p=a.length;s<p;s++)(a[s].fn!==e||o&&!a[s].once||n&&a[s].context!==n)&&u.push(a[s]);u.length?this._events[i]=1===u.length?u[0]:u:c(this,i)}return this},u.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&c(this,e)):(this._events=new i,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,t.exports=u},function(t,e,n){"use strict";n.r(e);var o,r=n(0),i=n.n(r),a=function(){function t(e){if(this.mediatorMap={},this.eventEmitter=new i.a,t.instanceMap[e])throw new Error(s);this.multitonKey=e,this.initializeView()}return t.getInstance=function(e){return e?(this.instanceMap[e]||(this.instanceMap[e]=new t(e)),this.instanceMap[e]):null},t.removeView=function(t){delete this.instanceMap[t]},t.prototype.removeObserver=function(t,e,n){this.eventEmitter.removeListener(t,e,n)},t.prototype.registerObserver=function(t,e,n){this.eventEmitter.on(t,e,n)},t.prototype.notifyObservers=function(t){for(var e,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];(e=this.eventEmitter).emit.apply(e,[t,t].concat(n))},t.prototype.registerMediator=function(t){if(!this.mediatorMap[t.getMediatorName()]){t.initializeNotifier(this.multitonKey),t.registerNotificationInterests(),this.mediatorMap[t.getMediatorName()]={mediator:t,interests:t.listNotificationInterests.slice()};var e=this.mediatorMap[t.getMediatorName()].interests;if(e.length>0)for(var n=0,o=e;n<o.length;n++){var r=o[n];this.registerObserver(r,t.handleSubscribedNotification,t)}t.onRegister()}},t.prototype.updateMediator=function(t){if(this.mediatorMap[t.getMediatorName()]){var e=this.mediatorMap[t.getMediatorName()].interests,n=t.listNotificationInterests;console.warn(e),console.warn(n);for(var o=0,r=e;o<r.length;o++){var i=r[o];this.removeObserver(i,t.handleSubscribedNotification,t)}for(var a=0,s=n;a<s.length;a++){i=s[a];this.registerObserver(i,t.handleSubscribedNotification,t)}this.mediatorMap[t.getMediatorName()].interests=n.slice()}},t.prototype.retrieveMediator=function(t){return this.mediatorMap[t].mediator},t.prototype.removeMediator=function(t){if(!this.mediatorMap[t])return null;var e=this.mediatorMap[t].mediator,n=this.mediatorMap[t].interests;if(n.length>0)for(var o=0,r=n;o<r.length;o++){var i=r[o];this.removeObserver(i,e.handleSubscribedNotification,e)}return delete this.mediatorMap[t],e.onRemove(),e},t.prototype.hasMediator=function(t){return void 0!==this.mediatorMap[t]},t.prototype.initializeView=function(){},t.instanceMap={},t}(),s="View instance for this Multiton key already constructed!",c=function(){function t(e){if(this.commandMap={},t.instanceMap[e])throw new Error(u);this.multitonKey=e,this.initializeController()}return t.removeController=function(t){delete this.instanceMap[t]},t.getInstance=function(e){return e?(this.instanceMap[e]||(this.instanceMap[e]=new t(e)),this.instanceMap[e]):null},t.prototype.registerCommand=function(t,e){this.commandMap[t]||(this.commandMap[t]=[],this.view.registerObserver(t,this.executeCommand,this)),this.commandMap[t].push(e)},t.prototype.registerCommandOnce=function(t,e){this.commandMap[t]||(this.commandMap[t]=[],this.view.registerObserver(t,this.executeCommand,this),this.view.registerObserver(t,this.removeCommand.bind(this,t,e),this)),this.commandMap[t].push(e)},t.prototype.hasCommand=function(t,e){return this.hasAnyCommand(t)&&-1!==this.commandMap[t].indexOf(e)},t.prototype.hasAnyCommand=function(t){return void 0!==this.commandMap[t]&&0!==this.commandMap[t].length},t.prototype.removeCommands=function(t){this.hasAnyCommand(t)&&(this.view.removeObserver(t,this.executeCommand,this),delete this.commandMap[t])},t.prototype.removeCommand=function(t,e){this.hasCommand(t,e)&&this.commandMap[t].splice(this.commandMap[t].indexOf(e),1)},t.prototype.initializeController=function(){this.view=a.getInstance(this.multitonKey)},t.prototype.executeCommand=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var o=this.commandMap[t];if(o&&0!==o.length)for(var r=0,i=o;r<i.length;r++){var a=new(0,i[r]);a.initializeNotifier(this.multitonKey),a.execute.apply(a,[t].concat(e))}},t.instanceMap={},t}(),u="controller key for this Multiton key already constructed",p=function(){function t(e){if(this.proxyMap={},t.instanceMap[e])throw new Error(f);this.multitonKey=e,this.initializeModel()}return t.getInstance=function(e){return e?(this.instanceMap[e]||(this.instanceMap[e]=new t(e)),this.instanceMap[e]):null},t.removeModel=function(t){delete this.instanceMap[t]},t.prototype.registerProxy=function(t){t.initializeNotifier(this.multitonKey),this.proxyMap[t.getProxyName()]=t,t.onRegister()},t.prototype.retrieveProxy=function(t){return this.proxyMap[t]},t.prototype.hasProxy=function(t){return void 0!==this.proxyMap[t]},t.prototype.removeProxy=function(t){if(this.proxyMap[t]){var e=this.proxyMap[t];return e.onRemove(),delete this.proxyMap[t],e}return null},t.prototype.initializeModel=function(){},t.instanceMap={},t}(),f="Model instance for this Multiton key already constructed!",l=function(){function t(e){if(t.instanceMap[e])throw new Error(h);this.initializeNotifier(e),this.initializeFacade()}return t.getInstance=function(e){return e?(t.instanceMap[e]||(t.instanceMap[e]=new t(e)),t.instanceMap[e]):null},t.hasCore=function(t){return void 0!==this.instanceMap[t]},t.removeCore=function(t){this.instanceMap[t]&&(p.removeModel(t),a.removeView(t),c.removeController(t),delete this.instanceMap[t])},t.prototype.initializeFacade=function(){this.initializeModel(),this.initializeController(),this.initializeView()},t.prototype.registerCommand=function(t,e){this.controller.registerCommand(t,e)},t.prototype.registerCommandOnce=function(t,e){this.controller.registerCommandOnce(t,e)},t.prototype.removeCommands=function(t){this.controller.removeCommands(t)},t.prototype.removeCommand=function(t,e){this.controller.removeCommand(t,e)},t.prototype.hasAnyCommand=function(t){return this.controller.hasAnyCommand(t)},t.prototype.hasCommand=function(t,e){return this.controller.hasCommand(t,e)},t.prototype.registerProxy=function(t){this.model.registerProxy(t)},t.prototype.retrieveProxy=function(t){return this.model.retrieveProxy(t)},t.prototype.removeProxy=function(t){return this.model?this.model.removeProxy(t):null},t.prototype.hasProxy=function(t){return this.model.hasProxy(t)},t.prototype.registerMediator=function(t){this.view.registerMediator(t)},t.prototype.updateMediator=function(t){this.view.updateMediator(t)},t.prototype.retrieveMediator=function(t){return this.view.retrieveMediator(t)},t.prototype.removeMediator=function(t){return this.view.removeMediator(t)},t.prototype.hasMediator=function(t){return this.view.hasMediator(t)},t.prototype.sendNotification=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.notifyObservers.apply(this,[t].concat(e))},t.prototype.notifyObservers=function(t){for(var e,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];(e=this.view).notifyObservers.apply(e,[t].concat(n))},t.prototype.initializeNotifier=function(t){this.multitonKey=t},t.prototype.initializeController=function(){this.controller||(this.controller=c.getInstance(this.multitonKey))},t.prototype.initializeModel=function(){this.model||(this.model=p.getInstance(this.multitonKey))},t.prototype.initializeView=function(){this.view||(this.view=a.getInstance(this.multitonKey))},t.instanceMap={},t}(),h="Facade instance for this Multiton key already constructed!",y=function(){function t(){}return t.prototype.initializeNotifier=function(t){this.multitonKey=t,this.facade=this.getFacade()},t.prototype.sendNotification=function(t){for(var e,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];this.facade&&(e=this.facade).sendNotification.apply(e,[t].concat(n))},t.prototype.getFacade=function(){if(null===this.multitonKey)throw new Error(d);return l.getInstance(this.multitonKey)},t}(),d="multitonKey for this Notifier not yet initialized!",m=(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m(e,t),e}(y),M=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),b=function(t){function e(){var e=t.call(this)||this;return e.subCommands=[],e.initializeMacroCommand(),e}return M(e,t),e.prototype.initializeMacroCommand=function(){},e.prototype.addSubCommand=function(t){this.subCommands.push(t)},e}(v),g=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),w=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},_=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},x=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return g(e,t),e.prototype.execute=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return w(this,void 0,void 0,function(){var n,o;return _(this,function(r){switch(r.label){case 0:return this.subCommands.length>0?(n=this.subCommands.shift(),(o=new n).initializeNotifier(this.multitonKey),[4,o.execute.apply(o,[t].concat(e))]):[3,2];case 1:return r.sent(),[3,0];case 2:return[2]}})})},e}(b),O=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return O(e,t),e.prototype.execute=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(;this.subCommands.length>0;){var o=new(this.subCommands.shift());o.initializeNotifier(this.multitonKey),o.execute.apply(o,[t].concat(e))}},e}(b),N=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),P=function(t){function e(e,n){var o=t.call(this)||this;return o.notificationInterests=[],o.isWake=!0,o.mediatorName=e||j,o.viewComponent=n,o}return N(e,t),e.prototype.sleep=function(){this.isWake=!1},e.prototype.wake=function(){this.isWake=!0},e.prototype.getMediatorName=function(){return this.mediatorName},e.prototype.setViewComponent=function(t){this.viewComponent=t},e.prototype.getViewComponent=function(){return this.viewComponent},e.prototype.subscribeToNotifications=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,o=t;n<o.length;n++){var r=o[n];if(-1!==this.notificationInterests.indexOf(r))return;this.notificationInterests.push(r)}this.updateMediator()},e.prototype.unsubscribeToNotification=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,o=t;n<o.length;n++){var r=o[n],i=this.notificationInterests.indexOf(r);if(-1===i)return;this.notificationInterests.splice(i,1)}this.updateMediator()},e.prototype.handleSubscribedNotification=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.isWake&&this.handleNotification.apply(this,[t].concat(e))},e.prototype.onRegister=function(){},e.prototype.onRemove=function(){},Object.defineProperty(e.prototype,"listNotificationInterests",{get:function(){return this.notificationInterests},enumerable:!0,configurable:!0}),e.prototype.updateMediator=function(){this.facade.updateMediator(this)},e}(y),j="Mediator",z=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),I=function(t){function e(e,n){var o=t.call(this)||this;return o.proxyName=e||k,o.data=n,o}return z(e,t),e.prototype.getProxyName=function(){return this.proxyName},e.prototype.onRegister=function(){},e.prototype.onRemove=function(){},Object.defineProperty(e.prototype,"vo",{get:function(){return this.data},set:function(t){this.data=t},enumerable:!0,configurable:!0}),e}(y),k="Proxy";n.d(e,"Controller",function(){return c}),n.d(e,"Model",function(){return p}),n.d(e,"View",function(){return a}),n.d(e,"AsyncMacroCommand",function(){return x}),n.d(e,"SimpleCommand",function(){return v}),n.d(e,"SyncMacroCommand",function(){return C}),n.d(e,"Facade",function(){return l}),n.d(e,"Mediator",function(){return P}),n.d(e,"Notifier",function(){return y}),n.d(e,"Proxy",function(){return I})}])});
//# sourceMappingURL=index.js.map